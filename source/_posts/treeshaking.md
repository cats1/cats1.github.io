---
title: treeshaking
date: 2017-12-20 15:49:41
tags:
- treeshaking
---

# 概念
webpack 里的tree-shaking的到来不得不归功于es6规范的模块。为什么这么说，如今的前端模块规范很多，比较出流行的比如commonJS , AMD , es6 。
## commonJS 模块
commonJS的模块规范在Node中发扬光大，总的来说，它的特性有这几个：
* 动态加载模块：commonJS和es6的最大区别大概就在于此了吧，commonJS模块的动态加载能够很轻松的实现懒加载，优化用户体验。
* 加载整个模块：commonJS模块中，导出的是整个模块。
* 每个模块皆为对象：commonJS模块都被视作一个对象。
* 值拷贝：commonJS的模块输出和 函数的值传递相似，都是值的拷贝

## es6 模块
* 静态解析:即在解析阶段就确定输出的模块，所以es6模块的import一般写在被引入文件的开头。
* 模块不是对象: 在es6里，每个模块并不会当做一个对象看待
* 加载的不是整个模块: 在es6模块中经常会看见一个模块中有好几个export 导出
* 模块的引用: es6模块中，导出的并不是模块的值拷贝，而是这个模块的引用。

在结合es6模块和commonJS模块的区别之后，我们知道es6的特点是静态解析，而commonJS模块的特点是动态解析的，因此，借于es6模块的静态解析，tree-shaking的实现才能成为可能。
在webpack中，tree-shaking指的就是按需加载，即没有被引用的模块不会被打包进来，减少我们的包大小，缩小应用的加载时间，呈现给用户更佳的体验。

# 怎么使用tree-shaking
webpack默认es6规范编写的模块都能使用tree-shaking。
# 优点
为了减少页面的加载时间，将无用的代码删除，减少js包的大小，从而减少用户等待的时间，使用户不因为漫长的等待而离开。