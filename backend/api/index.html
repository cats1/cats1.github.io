<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Restful API | lana&#39;s home</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="vuepress 前端个人学习网站">
    
    <link rel="preload" href="/assets/css/0.styles.98530cad.css" as="style"><link rel="preload" href="/assets/js/app.a4743452.js" as="script"><link rel="preload" href="/assets/js/2.b72805e3.js" as="script"><link rel="preload" href="/assets/js/12.f8166b62.js" as="script"><link rel="prefetch" href="/assets/js/10.97c6631e.js"><link rel="prefetch" href="/assets/js/100.ddd238ad.js"><link rel="prefetch" href="/assets/js/101.acf46de3.js"><link rel="prefetch" href="/assets/js/102.7ecc34c5.js"><link rel="prefetch" href="/assets/js/103.9abec0c7.js"><link rel="prefetch" href="/assets/js/104.99a0bd64.js"><link rel="prefetch" href="/assets/js/105.5bd4279e.js"><link rel="prefetch" href="/assets/js/106.4a1a1e6d.js"><link rel="prefetch" href="/assets/js/107.53190e25.js"><link rel="prefetch" href="/assets/js/108.afb416d9.js"><link rel="prefetch" href="/assets/js/109.9c89f8cf.js"><link rel="prefetch" href="/assets/js/11.efe147a8.js"><link rel="prefetch" href="/assets/js/110.77f01a7c.js"><link rel="prefetch" href="/assets/js/111.f8ccec3a.js"><link rel="prefetch" href="/assets/js/112.a1b70a36.js"><link rel="prefetch" href="/assets/js/113.f74d3176.js"><link rel="prefetch" href="/assets/js/114.9f4f70ac.js"><link rel="prefetch" href="/assets/js/115.3e915f82.js"><link rel="prefetch" href="/assets/js/116.21d4d9f8.js"><link rel="prefetch" href="/assets/js/117.ed1ac975.js"><link rel="prefetch" href="/assets/js/118.b60ec45f.js"><link rel="prefetch" href="/assets/js/119.a28f9722.js"><link rel="prefetch" href="/assets/js/120.5f45ba33.js"><link rel="prefetch" href="/assets/js/121.e2c73c6e.js"><link rel="prefetch" href="/assets/js/122.bea0d35f.js"><link rel="prefetch" href="/assets/js/123.4918a056.js"><link rel="prefetch" href="/assets/js/124.e9d5fd6b.js"><link rel="prefetch" href="/assets/js/125.378cd9ad.js"><link rel="prefetch" href="/assets/js/126.785be7e4.js"><link rel="prefetch" href="/assets/js/127.2dfe1120.js"><link rel="prefetch" href="/assets/js/128.0eeadbcb.js"><link rel="prefetch" href="/assets/js/129.ffd3ffd2.js"><link rel="prefetch" href="/assets/js/13.669aa6cb.js"><link rel="prefetch" href="/assets/js/130.e3caaa90.js"><link rel="prefetch" href="/assets/js/131.8914dd22.js"><link rel="prefetch" href="/assets/js/132.0ae37932.js"><link rel="prefetch" href="/assets/js/133.e989899b.js"><link rel="prefetch" href="/assets/js/134.ea062f20.js"><link rel="prefetch" href="/assets/js/135.6c137b49.js"><link rel="prefetch" href="/assets/js/14.c9aa70a1.js"><link rel="prefetch" href="/assets/js/15.3d05e5f2.js"><link rel="prefetch" href="/assets/js/16.360281d8.js"><link rel="prefetch" href="/assets/js/17.ff7cabb3.js"><link rel="prefetch" href="/assets/js/18.be16eeed.js"><link rel="prefetch" href="/assets/js/19.81b3a31e.js"><link rel="prefetch" href="/assets/js/20.472bc449.js"><link rel="prefetch" href="/assets/js/21.86395f2b.js"><link rel="prefetch" href="/assets/js/22.6c69ed50.js"><link rel="prefetch" href="/assets/js/23.2f198631.js"><link rel="prefetch" href="/assets/js/24.748c9bc2.js"><link rel="prefetch" href="/assets/js/25.c5065323.js"><link rel="prefetch" href="/assets/js/26.61d441a1.js"><link rel="prefetch" href="/assets/js/27.bfd0a986.js"><link rel="prefetch" href="/assets/js/28.bafeb054.js"><link rel="prefetch" href="/assets/js/29.0d2a1bfd.js"><link rel="prefetch" href="/assets/js/3.7f8809fd.js"><link rel="prefetch" href="/assets/js/30.8bb40757.js"><link rel="prefetch" href="/assets/js/31.eac619f5.js"><link rel="prefetch" href="/assets/js/32.04c63c5c.js"><link rel="prefetch" href="/assets/js/33.ae09c55e.js"><link rel="prefetch" href="/assets/js/34.1145a6f4.js"><link rel="prefetch" href="/assets/js/35.feb9083f.js"><link rel="prefetch" href="/assets/js/36.a586ce8a.js"><link rel="prefetch" href="/assets/js/37.c61e20e9.js"><link rel="prefetch" href="/assets/js/38.991c3427.js"><link rel="prefetch" href="/assets/js/39.23356a49.js"><link rel="prefetch" href="/assets/js/4.6819ae80.js"><link rel="prefetch" href="/assets/js/40.a3ca9111.js"><link rel="prefetch" href="/assets/js/41.649b9d9b.js"><link rel="prefetch" href="/assets/js/42.fde8ad7b.js"><link rel="prefetch" href="/assets/js/43.2d876a7c.js"><link rel="prefetch" href="/assets/js/44.64c20de7.js"><link rel="prefetch" href="/assets/js/45.a901a632.js"><link rel="prefetch" href="/assets/js/46.4ac83b64.js"><link rel="prefetch" href="/assets/js/47.2b45c49a.js"><link rel="prefetch" href="/assets/js/48.2bc12623.js"><link rel="prefetch" href="/assets/js/49.52a95dcd.js"><link rel="prefetch" href="/assets/js/5.20de2bc4.js"><link rel="prefetch" href="/assets/js/50.f445c922.js"><link rel="prefetch" href="/assets/js/51.07570e18.js"><link rel="prefetch" href="/assets/js/52.cf21a2b8.js"><link rel="prefetch" href="/assets/js/53.77792ddd.js"><link rel="prefetch" href="/assets/js/54.f19c487a.js"><link rel="prefetch" href="/assets/js/55.7fb0d05b.js"><link rel="prefetch" href="/assets/js/56.62fd0b66.js"><link rel="prefetch" href="/assets/js/57.1d6b0809.js"><link rel="prefetch" href="/assets/js/58.1aed920b.js"><link rel="prefetch" href="/assets/js/59.c2ab9dbe.js"><link rel="prefetch" href="/assets/js/6.e9784f3e.js"><link rel="prefetch" href="/assets/js/60.f4e387a9.js"><link rel="prefetch" href="/assets/js/61.735cc066.js"><link rel="prefetch" href="/assets/js/62.312489f2.js"><link rel="prefetch" href="/assets/js/63.dd2a2d4e.js"><link rel="prefetch" href="/assets/js/64.67dfd073.js"><link rel="prefetch" href="/assets/js/65.c2c22de8.js"><link rel="prefetch" href="/assets/js/66.7ea30a4b.js"><link rel="prefetch" href="/assets/js/67.6913be8c.js"><link rel="prefetch" href="/assets/js/68.b743701c.js"><link rel="prefetch" href="/assets/js/69.088259eb.js"><link rel="prefetch" href="/assets/js/7.80ddef84.js"><link rel="prefetch" href="/assets/js/70.10e2101b.js"><link rel="prefetch" href="/assets/js/71.11121db3.js"><link rel="prefetch" href="/assets/js/72.38811b9b.js"><link rel="prefetch" href="/assets/js/73.b5030976.js"><link rel="prefetch" href="/assets/js/74.d218c8d5.js"><link rel="prefetch" href="/assets/js/75.89c8d415.js"><link rel="prefetch" href="/assets/js/76.998def7e.js"><link rel="prefetch" href="/assets/js/77.6cff4b72.js"><link rel="prefetch" href="/assets/js/78.45b13ba4.js"><link rel="prefetch" href="/assets/js/79.50d5b3d0.js"><link rel="prefetch" href="/assets/js/8.4ebeab97.js"><link rel="prefetch" href="/assets/js/80.e38925eb.js"><link rel="prefetch" href="/assets/js/81.c712e794.js"><link rel="prefetch" href="/assets/js/82.f4018c72.js"><link rel="prefetch" href="/assets/js/83.878fb392.js"><link rel="prefetch" href="/assets/js/84.7ddaa3ca.js"><link rel="prefetch" href="/assets/js/85.06c8fa8b.js"><link rel="prefetch" href="/assets/js/86.b889a2e3.js"><link rel="prefetch" href="/assets/js/87.2f3171f1.js"><link rel="prefetch" href="/assets/js/88.1b0c6839.js"><link rel="prefetch" href="/assets/js/89.293034a1.js"><link rel="prefetch" href="/assets/js/9.07e73bd0.js"><link rel="prefetch" href="/assets/js/90.cdd9df6a.js"><link rel="prefetch" href="/assets/js/91.e53063a5.js"><link rel="prefetch" href="/assets/js/92.0a41da3b.js"><link rel="prefetch" href="/assets/js/93.83c37c7e.js"><link rel="prefetch" href="/assets/js/94.14eea0cb.js"><link rel="prefetch" href="/assets/js/95.18279896.js"><link rel="prefetch" href="/assets/js/96.e06d8e4e.js"><link rel="prefetch" href="/assets/js/97.2b60994e.js"><link rel="prefetch" href="/assets/js/98.28ad17a5.js"><link rel="prefetch" href="/assets/js/99.2abf3996.js">
    <link rel="stylesheet" href="/assets/css/0.styles.98530cad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lana's home" class="logo"> <span class="site-name can-hide">lana's home</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title">随笔</span> <span class="arrow down"></span></button> <button type="button" aria-label="随笔" class="mobile-dropdown-title"><span class="title">随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/html5/" class="nav-link">
  Html5
</a></li><li class="dropdown-subitem"><a href="/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-subitem"><a href="/front/js/" class="nav-link">
  js
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-subitem"><a href="/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-subitem"><a href="/backend/mongodb/" class="nav-link">
  Mongodb
</a></li></ul></li><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/guide.html" class="nav-link">
  指引
</a></div><div class="nav-item"><a href="https://gitee.com/lanasine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/cats1/vuepresshome" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title">随笔</span> <span class="arrow down"></span></button> <button type="button" aria-label="随笔" class="mobile-dropdown-title"><span class="title">随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/front/html5/" class="nav-link">
  Html5
</a></li><li class="dropdown-subitem"><a href="/front/css/" class="nav-link">
  Css
</a></li><li class="dropdown-subitem"><a href="/front/js/" class="nav-link">
  js
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-subitem"><a href="/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-subitem"><a href="/backend/mongodb/" class="nav-link">
  Mongodb
</a></li></ul></li><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/nginx/" class="nav-link">
  Nginx
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/guide/guide.html" class="nav-link">
  指引
</a></div><div class="nav-item"><a href="https://gitee.com/lanasine" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/cats1/vuepresshome" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Backend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Api</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/api/" aria-current="page" class="active sidebar-link">Restful API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/api/#restful-api-设计" class="sidebar-link">RESTful API 设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/api/#api与用户的通信协议" class="sidebar-link">API与用户的通信协议</a></li><li class="sidebar-sub-header"><a href="/backend/api/#域名" class="sidebar-link">域名</a></li><li class="sidebar-sub-header"><a href="/backend/api/#路径" class="sidebar-link">路径</a></li><li class="sidebar-sub-header"><a href="/backend/api/#http动词" class="sidebar-link">HTTP动词</a></li><li class="sidebar-sub-header"><a href="/backend/api/#状态码" class="sidebar-link">状态码</a></li><li class="sidebar-sub-header"><a href="/backend/api/#错误处理" class="sidebar-link">错误处理</a></li><li class="sidebar-sub-header"><a href="/backend/api/#返回结果格式" class="sidebar-link">返回结果格式</a></li><li class="sidebar-sub-header"><a href="/backend/api/#版本" class="sidebar-link">版本</a></li><li class="sidebar-sub-header"><a href="/backend/api/#过滤信息" class="sidebar-link">过滤信息</a></li><li class="sidebar-sub-header"><a href="/backend/api/#uri规范" class="sidebar-link">URI规范</a></li><li class="sidebar-sub-header"><a href="/backend/api/#资源集合-vs单个资源" class="sidebar-link">资源集合 vs单个资源</a></li><li class="sidebar-sub-header"><a href="/backend/api/#安全性和幂等性" class="sidebar-link">安全性和幂等性</a></li></ul></li><li class="sidebar-sub-header"><a href="/backend/api/#错误分类" class="sidebar-link">错误分类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/api/#http-状态码" class="sidebar-link">Http 状态码</a></li><li class="sidebar-sub-header"><a href="/backend/api/#业务错误码" class="sidebar-link">业务错误码</a></li><li class="sidebar-sub-header"><a href="/backend/api/#给用户看的错误信息" class="sidebar-link">给用户看的错误信息</a></li><li class="sidebar-sub-header"><a href="/backend/api/#给开发者看的错误信息" class="sidebar-link">给开发者看的错误信息</a></li><li class="sidebar-sub-header"><a href="/backend/api/#设计错误类型" class="sidebar-link">设计错误类型</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Koa</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Mongodb</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Front</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="restful-api"><a href="#restful-api" class="header-anchor">#</a> Restful API</h1> <p><strong>Rest是web服务的一种架构风格，一种设计风格，是一种思想；同时Rest不是针对某一种编程语言的。</strong></p> <p><strong>RESTful架构</strong>，就是目前最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便。</p> <p><strong>REST（Representational State Transfer）</strong></p> <p>REST的名称&quot;表现层状态转化&quot;中，省略了主语。“表现层&quot;其实指的是&quot;资源”（Resources）的&quot;表现层&quot;。</p> <p><strong>资源（Resources）</strong></p> <ul><li>所谓&quot;资源&quot;，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</li> <li>所谓&quot;上网&quot;，就是与互联网上一系列的&quot;资源&quot;互动，调用它的URI。</li></ul> <p><strong>表现层（Representation）</strong></p> <p>&quot;资源&quot;是一种信息实体，它可以有多种外在表现形式。<strong>我们把&quot;资源&quot;具体呈现出来的形式，叫做它的&quot;表现层&quot;（Representation）。</strong></p> <p>比如，文本可以用<code>txt格式</code>表现，也可以用<code>HTML格式</code>、<code>XML格式</code>、<code>JSON格式</code>表现，甚至可以采用二进制格式；图片可以用<code>JPG格式</code>表现，也可以用<code>PNG格式</code>表现。</p> <p><code>URL</code>只代表资源的实体，不代表它的形式。严格地说，有些网址最后的<code>&quot;.html&quot;</code>后缀名是不必要的，因为这个后缀名表示格式，属于&quot;表现层&quot;范畴，而URI应该只代表&quot;资源&quot;的位置。它的具体表现形式，应该在HTTP请求的头信息中用<code>Accept</code>和<code>Content-Type</code>字段指定，这两个字段才是对&quot;表现层&quot;的描述。</p> <p><strong>状态转化（State Transfer）</strong></p> <p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p> <p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，<strong>如果客户端想要操作服务器，必须通过某种手段，让服务器端发生&quot;状态转化&quot;（State Transfer）。而这种转化是建立在表现层之上的，所以就是&quot;表现层状态转化&quot;。</strong></p> <p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：<code>GET</code>、<code>POST</code>、<code>PUT</code>、<code>DELETE</code>。四个表示操作方式对应对应四种基本操作</p> <ul><li><strong>GET</strong> 获取资源</li> <li><strong>POST</strong> 新建资源</li> <li><strong>PUT</strong> 更新资源</li> <li><strong>DELETE</strong> 删除资源</li></ul> <p><img src="https://img-blog.csdnimg.cn/20200909222511315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1MDE5Njk4,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p> <p>综合上面，<code>RESTful架构</code>的内容：</p> <ol><li>每一个URI代表一种资源；</li> <li>客户端和服务器之间，传递这种资源的某种表现层；</li> <li>客户端通过四个HTTP动词，对服务器端资源进行操作，实现&quot;表现层状态转化&quot;。</li></ol> <h2 id="restful-api-设计"><a href="#restful-api-设计" class="header-anchor">#</a> RESTful API 设计</h2> <h3 id="api与用户的通信协议"><a href="#api与用户的通信协议" class="header-anchor">#</a> API与用户的通信协议</h3> <p>采用<code>HTTPs</code>协议</p> <h3 id="域名"><a href="#域名" class="header-anchor">#</a> 域名</h3> <p>用<code>api</code>关键字标识接口<code>url</code></p> <p>示例：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>   # 应该尽量将API部署在专用域名之下。
   # 表示前后端数据交互
   https://api.example.com
   
   # 应该尽量将API部署在专用域名之下。
   https://example.org/api/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="路径"><a href="#路径" class="header-anchor">#</a> 路径</h3> <p>路径又称&quot;终点&quot;（endpoint），表示API的具体网址。</p> <p>在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的&quot;集合&quot;（collection），所以API中的名词也应该使用复数。</p> <p>举例来说，有一个API提供动物园（zoo）的信息，还包括各种动物和雇员的信息，则它的路径应该设计成下面这样。</p> <blockquote><ul><li>https://api.example.com/v1/zoos</li> <li>https://api.example.com/v1/animals</li> <li>https://api.example.com/v1/employees</li></ul></blockquote> <blockquote><p>使用中划线 - ，而不是使用下划线 _ 来提高uri的可读性</p> <p>在uri中使用小写字母</p> <p>不要在URI中使用尾部正斜杠（/）</p> <p>URI的路径部分使用正斜杠（/）字符表示资源之间的层次关系。</p> <p>切勿在URI中使用CRUD函数名称</p></blockquote> <h3 id="http动词"><a href="#http动词" class="header-anchor">#</a> HTTP动词</h3> <p>对于资源的具体操作类型，由HTTP动词表示。</p> <p>Rest架构：</p> <blockquote><p>GET <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A8080%2Fadmin%2Fuser" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin/user<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （查询用户）从服务器取出资源（一项或多项）。</p> <p>POST <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A8080%2Fadmin%2Fuser" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin/user<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （新增用户）在服务器新建一个资源。</p> <p>PUT <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A8080%2Fadmin%2Fuser" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin/user<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （更新用户）在服务器更新资源（客户端提供改变后的完整资源）。</p> <p>PATCH <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A8080%2Fadmin%2Fuser" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin/user<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （更新用户）在服务器更新资源（客户端提供改变的属性）。</p> <p>DELETE <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A8080%2Fadmin%2Fuser" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin/user<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> （删除用户）从服务器删除资源。</p></blockquote> <blockquote><p>GET（SELECT）：从服务器取出资源（一项或多项）。
POST（CREATE）：在服务器新建一个资源。
PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
DELETE（DELETE）：从服务器删除资源。</p></blockquote> <p>还有两个不常用的HTTP动词。</p> <blockquote><p>HEAD：获取资源的元数据。</p> <p>OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。</p></blockquote> <p>put与patch选择</p> <p>假设我们有一个UserInfo，里面有userId， userName， userGender等10个字段。可你的编辑功能因为需求，在某个特别的页面里只能修改userName，这时候的更新怎么做？patch诞生，只传一个userName到指定资源去，表示该请求是一个局部更新，后端仅更新接收到的字段。</p> <p>而put虽然也是更新资源，但要求前端提供的一定是一个完整的资源对象，理论上说，如果你用了put，但却没有提供完整的UserInfo，那么缺了的那些字段应该被清空</p> <p>在Restful架构中，每个网址uri代表一种资源，所以网址中不要有动词，而且用到的名词往往和数据库中的表名相对应。</p> <p>一般来说，数据库中的表都是同种记录的&quot;集合&quot;，所以API中的名词也应该使用复数，如：http://api.kaky.cn/v2/members</p> <p>例子：</p> <blockquote><ul><li>GET /zoos：列出所有动物园</li> <li>POST /zoos：新建一个动物园</li> <li>GET /zoos/ID：获取某个指定动物园的信息</li> <li>PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）</li> <li>PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）</li> <li>DELETE /zoos/ID：删除某个动物园</li> <li>GET /zoos/ID/animals：列出某个指定动物园的所有动物</li> <li>DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</li></ul></blockquote> <p>下面列举一些例子</p> <blockquote><p>GET /members：列出所有会员</p> <p>GET /members/{id}：获取某个指定会员的信息</p> <p>POST /members：新建一个会员</p> <p>PUT /members/{id}：更新某个指定会员的信息</p> <p>DELETE /members/{id}：删除某个指定的会员</p></blockquote> <p>特殊的接口可以出现动词，因为这些接口一般没有一个明确的资源，或是动词就是接口的核心含义</p> <blockquote><ul><li>https://api.baidu.com/place/search</li> <li>https://api.baidu.com/login</li></ul></blockquote> <p>在实际情况中，我们很少会获取所有资源，而通常会进行排序、过滤、限制等，如：</p> <blockquote><p>?limit=10：指定返回记录的数量</p> <p>?offset=10：指定返回记录的开始位置。</p> <p>?page=2&amp;per_page=10：指定第几页，以及每页的记录数。</p> <p>?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</p> <p>?member_type_id=1：指定筛选条件</p></blockquote> <h3 id="状态码"><a href="#状态码" class="header-anchor">#</a> 状态码</h3> <p>客户端的每一次请求，服务器都必须给出回应。回应包括HTTP状态码和数据两部分。</p> <p>使用适合的状态码很重要，而不应该全部都返回状态码 200。</p> <p>状态码，可根据以下标准按照项目扩展自身状态码。</p> <p>HTTP状态码就是一个三位数，分成5个类别。</p> <blockquote><p>1xx：信息，通信传输协议级信息。</p> <p>2xx：成功，表示客户端的请求已成功接受。</p> <p>3xx：重定向，表示客户端必须执行一些其他操作才能完成其请求。</p> <p>4xx：客户端错误，此类错误状态代码指向客户端。</p> <p>5xx：服务器错误，服务器负责这些错误状态代码。</p></blockquote> <p>总共这五大类总共包含100多种状态码，覆盖了绝大部分可能遇到的情况。每一种状态码都有标准的解释，客户端只需要查看状态码，就可以判断出发生了什么情况，所以服务器应该返回尽可能精确的状态码。</p> <p>API中不需要1xx状态码，下面介绍一下其他四类状态码的精确含义。</p> <p><strong>2xx状态码</strong></p> <p>200状态码表示操作成功，但是不同的方法可以返回更精确的状态码。</p> <blockquote><p>200~299段 表示操作成功：</p> <p>200 操作成功，正常返回</p> <p>201 操作成功，已经正在处理该请求</p> <p>200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。</p> <p>201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。</p> <p>202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）</p> <p>204 NO CONTENT - [DELETE]：用户删除数据成功。</p></blockquote> <blockquote><p>GET：200 OK</p> <p>POST：201 Created</p> <p>PUT：200 OK</p> <p>PATCH：200 OK</p> <p>DELETE：204 No Content</p></blockquote> <p>上面代码中，POST返回201状态码，表示生成了新的资源；DELETE返回204状态码，表示资源已经不存在。此外，202 Accepted状态码表示服务器已经收到请求，但还未进行处理，会在未来再处理，通常用于异步操作，下面是一个例子。</p> <p><strong>3xx状态码</strong></p> <p>API用不到301状态码（永久重定向）和 302状态码（暂时重定向，307也是这个含义），因为他们可以由应用级别返回，浏览器会直接跳转，API级别可以不考虑这两种情况。</p> <blockquote><p>300~399段 表示参数方面的异常</p> <p>300 参数类型错误</p> <p>301 参数格式错误</p> <p>302 参数超出正常取值范围</p> <p>303 token过期</p> <p>304 token无效</p> <p>301：永久重定向
302：暂时重定向</p></blockquote> <p>API用到 3xx 状态码，主要是 303  SeeOther，表示参考另一个URL。他与302和307的含义一样，也是“暂时重定向”，区别在于302和307用于 GET请求，而303 用于 POST、PUT和DELETE请求。收到303以后，浏览器不会自动跳转，而会让用户自己决定下一步怎么办。下面是一个例子。</p> <p><strong>4xx 状态码</strong></p> <p>4xx状态码表示客户端错误，主要有下面几种。</p> <blockquote><p>400~499段 表示请求地址方面的异常：</p> <p>400 找不到地址</p> <p>400 Bad Request：服务器不理解客户端的请求，未做任何处理。</p> <p>401 Unauthorized：用户未提供身份验证凭据，或者没有通过身份验证。</p> <p>403 Forbidden：用户通过了身份验证，但是不具有访问资源所需的权限。</p> <p>404 Not Found：所请求的资源不存在，或不可用。</p> <p>405 Method Not Allowed：用户已经通过身份验证，但是所有的HTTP方法不在他的权限之内。</p> <p>410 Gone：所请求的资源已从这个地址转移，不在可用。</p> <p>415 Unsupported Media Type：客户端要求的返回格式不支持。比如，API只能返回JSON格式，但是客户端要求返回XML格式。</p> <p>422 Unprocessable Entity：客户端上传的附件无法处理，导致请求失败。</p> <p>429 Too Many Requests：客户端的请求次数超过限额。</p></blockquote> <blockquote><p>400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。
401 Unauthorized - [<em>]：表示用户没有权限（令牌、用户名、密码错误）。
403 Forbidden - [</em>] 表示用户得到授权（与401错误相对），但是访问是被禁止的。
404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</p> <p>406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</p> <p>410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。
422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。</p></blockquote> <p><strong>5xx状态码</strong></p> <p>5xx状态码表示服务端错误。一般来说，API不会向用户透漏服务器的详细信息，所以只要两个状态就够了。</p> <blockquote><p>500~599段 表示内部代码异常：</p> <p>500 服务器代码异常</p> <p>500 Internal Server Error：客户端请求有效，服务器处理时发生意外。</p> <p>503 Service Unavaliable：服务器无法处理请求，一般用于网站维护状态。</p></blockquote> <p>服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的HTTP动词）。</p> <blockquote><p>§200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。</p> <p>§201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。</p> <p>§202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）</p> <p>§204 NO CONTENT - [DELETE]：用户删除数据成功。</p> <p>§400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。</p> <p>§401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。</p> <p>§403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。</p> <p>§404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</p> <p>§406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</p> <p>§410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。</p> <p>§422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。</p> <p>§500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。</p></blockquote> <h3 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h3> <p>状态码是4xx时，应返回错误信息，error当做key。</p> <p>如果状态码是4xx，就应该向用户返回出错信息。一般来说，返回的信息中将error作为键名，出错信息作为键值即可。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>   {
       error: &quot;Invalid API key&quot;
   }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="返回结果格式"><a href="#返回结果格式" class="header-anchor">#</a> 返回结果格式</h3> <p>尽量采用json格式避免XML格式。</p> <p>API返回的数据格式，不应该是纯文本，而应该是一个JSON对象，因为这样才能返回标准的结构化数据。所以，服务器回应的HTTP头的 Content-Type 属性要设为application/json。客户端请求时，也要明确告诉服务器，可以接受JSON格式，即请求的HTTP头的 Accept 属性也要设为 application/json。</p> <div class="language-clike line-numbers-mode"><pre class="language-clike"><code>   GET <span class="token operator">/</span>collection：返回资源对象的列表（数组）
   GET <span class="token operator">/</span>collection<span class="token operator">/</span>resource：返回单个资源对象
   POST <span class="token operator">/</span>collection：返回新生成的资源对象
   PUT <span class="token operator">/</span>collection<span class="token operator">/</span>resource：返回完整的资源对象
   PATCH <span class="token operator">/</span>collection<span class="token operator">/</span>resource：返回完整的资源对象
   DELETE <span class="token operator">/</span>collection<span class="token operator">/</span>resource：返回一个空文档
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="版本"><a href="#版本" class="header-anchor">#</a> 版本</h3> <p>应该将API的版本号放入URL。将版本号放进api的url中会比放在请求头header中更为合适，如：http://api.kaky.cn/v2/</p> <blockquote><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>v1<span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <p>URL只指定资源，以HTTP方法动词进行不同的操作。用HTTP STATUS/CODE定义操作结果。</p> <p>Restful：遵守了rest风格的web服务便可称为Restful。</p> <h3 id="过滤信息"><a href="#过滤信息" class="header-anchor">#</a> 过滤信息</h3> <p>如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果。</p> <p>下面是一些常见的参数。</p> <blockquote><p>https://api.example.com/v1/zoos?limit=10：指定返回记录的数量</p> <p>https://api.example.com/v1/zoos?offset=10：指定返回记录的开始位置</p> <p>https://api.example.com/v1/zoos?page=2&amp;per_page=100：指定第几页，以及每页的记录数</p> <p>https://api.example.com/v1/zoos?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序</p> <p>https://api.example.com/v1/zoos?animal_type_id=1：指定筛选条件</p></blockquote> <p>参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，GET /zoo/ID/animals 与 GET /animals?zoo_id=ID 的含义是相同的。</p> <h3 id="uri规范"><a href="#uri规范" class="header-anchor">#</a> URI规范</h3> <blockquote><p>1.不用大写；</p> <p>2.用中杠 - 不用下杠 _ ；</p> <p>3.参数列表要encode；</p> <p>4.URI中的名词表示资源集合，使用复数形式。</p> <p>5.在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词（特殊情况可以使用动词），而且所用的名词往往与数据库的表格名对应。</p> <p>6.不要在URI中使用尾部正斜杠（/）</p> <p>7.URI的路径部分使用正斜杠（/）字符表示资源之间的层次关系。</p></blockquote> <h3 id="资源集合-vs单个资源"><a href="#资源集合-vs单个资源" class="header-anchor">#</a> 资源集合 vs单个资源</h3> <p>URI表示资源的两种方式：资源集合、单个资源。</p> <p>资源集合：</p> <blockquote><p>/zoos //所有动物园</p> <p>/zoos/1/animals //id为1的动物园中的所有动物</p></blockquote> <p>单个资源：</p> <blockquote><p>/zoos/1//id为1的动物园</p> <p>/zoos/1;2;3//id为1，2，3的动物园</p></blockquote> <p>避免层级过深的URI</p> <p>在url中表达层级，用于 按实体关联关系进行对象导航 ，一般根据id导航。</p> <p>过深的导航容易导致url膨胀，不易维护，如 GET /zoos/1/areas/3/animals/4 ，尽量使用查询参数代替路径中的实体导航，如 GET/animals?zoo=1&amp;area=3 ；</p> <h3 id="安全性和幂等性"><a href="#安全性和幂等性" class="header-anchor">#</a> 安全性和幂等性</h3> <ol><li>安全性 ：不会改变资源状态，可以理解为只读的；</li> <li>幂等性 ：执行1次和执行N次，对资源状态改变的效果是等价的。</li></ol> <table><thead><tr><th></th> <th>安全性</th> <th>幂等性</th></tr></thead> <tbody><tr><td>GET</td> <td>✔</td> <td>✔</td></tr> <tr><td>POST</td> <td>✘</td> <td>✘</td></tr> <tr><td>PUT</td> <td>✘</td> <td>✔</td></tr> <tr><td>DELETE</td> <td>✘</td> <td>✔</td></tr></tbody></table> <p>安全性和幂等性均不保证反复请求能拿到相同的response。以 DELETE为例，第一次DELETE返回200表示删除成功，第二次返回404提示资源不存在，这是允许的。</p> <h2 id="错误分类"><a href="#错误分类" class="header-anchor">#</a> 错误分类</h2> <h3 id="http-状态码"><a href="#http-状态码" class="header-anchor">#</a> <strong>Http 状态码</strong></h3> <p>Http 状态码定义了非常多的错误类型，但实际应用中，我们常用的状态码并不多，通常都是下面这几方面：</p> <p>API 正常工作 (200, 201)</p> <p>客户端错误 (400, 401, 403, 404)</p> <p>服务端错误 (500, 503)</p> <h3 id="业务错误码"><a href="#业务错误码" class="header-anchor">#</a> <strong>业务错误码</strong></h3> <p>很多时候，我们根据业务类型来自定义错误码。</p> <p>这些业务错误码与 Http 状态码并不重叠，这时候我们可以返回业务错误码，用来提示用户/开发者错误类型。</p> <h3 id="给用户看的错误信息"><a href="#给用户看的错误信息" class="header-anchor">#</a> 给用户看的错误信息</h3> <p>当出现错误的时候，我们需要提示用户如何处理这种情况，通常这种错误信息都是必须的。</p> <h3 id="给开发者看的错误信息"><a href="#给开发者看的错误信息" class="header-anchor">#</a> 给开发者看的错误信息</h3> <p>若我们的 API 需要开放给第三方开发者，那么我们就需要考虑返回一些给开发者看的错误信息。</p> <h3 id="设计错误类型"><a href="#设计错误类型" class="header-anchor">#</a> <strong>设计错误类型</strong></h3> <p>我们刚才提到过，可以利用 Http 状态码来为错误类型进行分类。</p> <p>通常我们所说的分类通常是对客户端错误进行分类， 即 4xx 类型的错误。</p> <p>而这些错误类型中，我们最常用的是：</p> <blockquote><p>400 Bad Request</p> <p>由于包含语法错误，当前请求无法被服务器理解。除非进行修改，否则客户端不应该重复提交这个请求。</p> <p>通常在请求参数不合法或格式错误的时候可以返回这个状态码。</p> <p>401 Unauthorized</p> <p>当前请求需要用户验证。</p> <p>通常在没有登录的状态下访问一些受保护的 API 时会用到这个状态码。</p> <p>403 Forbidden</p> <p>服务器已经理解请求，但是拒绝执行它。与401响应不同的是，身份验证并不能提供任何帮助。</p> <p>通常在没有权限操作资源时(如修改/删除一个不属于该用户的资源时)会用到这个状态码。</p> <p>404 Not Found</p> <p>请求失败，请求所希望得到的资源未被在服务器上发现。</p> <p>通常在找不到资源时返回这个状态码。</p></blockquote> <p>格式错误 (FORMAT_INVALID)</p> <p>数据不存在 (DATA_NOT_FOUND)</p> <p>数据已存在 (DATA_EXISTED)</p> <p>数据无效 (DATA_INVALID)</p> <p>登录错误 (LOGIN_REQUIRED)</p> <p>权限不足 (PERMISSION_DENIED)</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/cats1/vuepresshome/edit/main/docs/backend/api/README.md" target="_blank" rel="noopener noreferrer">有问题需改善此页面!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/backend/docker/">
        docker
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a4743452.js" defer></script><script src="/assets/js/2.b72805e3.js" defer></script><script src="/assets/js/12.f8166b62.js" defer></script>
  </body>
</html>
