(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{437:function(a,t,e){"use strict";e.r(t);var s=e(42),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"canvas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#canvas"}},[a._v("#")]),a._v(" canvas")]),a._v(" "),e("ul",[e("li",[a._v("Canvas是 HTML5 新增的一个标签，它的主要作用是画矢量图。使用Javascript 脚本来绘制图像。canvas能做游戏，能做特别炫的效果，主要是为画图而生。")]),a._v(" "),e("li",[a._v("Canvas是一个实时渲染的图片，可以实现不刷新页面，对画布进行实时渲染（runtime)。")])]),a._v(" "),e("p",[a._v("使用标签 "),e("code",[a._v("<canvas>")]),a._v(" 在页面创建一个 canvas 画布，一个 2D 平面，并渲染出指定的画面，如形状、图像、文字、图案等。")]),a._v(" "),e("p",[a._v("判断用户浏览器是否支持 < canvas >标签，支持 < canvas> 的浏览器会只渲染 < canvas> 标签，而忽略其中的替代内容。不支持 < canvas> 的浏览器则会直接渲染替代内容。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('\x3c!--显示文本--\x3e\n<canvas>你的浏览器不支持 canvas，请升级你的浏览器。</canvas>\n\x3c!--显示图片--\x3e\n<canvas><img src="./img.jpg" alt=""> </canvas>\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h2",{attrs:{id:"创建-canvas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建-canvas"}},[a._v("#")]),a._v(" 创建 canvas")]),a._v(" "),e("p",[a._v("使用标签 "),e("code",[a._v("<canvas>")]),a._v(" 创建画布，该元素（DOM 元素）具有以下属性")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("width")]),a._v(" 画布的宽度")]),a._v(" "),e("li",[e("code",[a._v("height")]),a._v(" 画布的高度")])]),a._v(" "),e("p",[a._v("可以通过 CSS 或 JavaScript 设置画布大小")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("const canvas = document.querySelector('canvas');\nconst ctx = canvas.getContext('2d');\nlet windowWidth = document.documentElement.clientWidth;\nlet windowHeight = document.documentElement.clientHeight;\n// 设置画布大小（满屏）\ncanvas.width = windowWidth;\ncanvas.height = windowHeight;\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("p",[a._v("canvas 使用坐标系定位图像，在二维图像中，左上角为 "),e("code",[a._v("(0,0)")]),a._v(" 坐标值依次向右侧（"),e("code",[a._v("x")]),a._v(" 值）和向下方（"),e("code",[a._v("y")]),a._v(" 值）增大。")]),a._v(" "),e("p",[a._v("该 DOM 元素具有方法 "),e("code",[a._v("getContext")]),a._v(" 获取 canvas 的内容，返回一个对象，具有更丰富的方法，可以将该对象理解为一支「画笔」，调用它的不同方法并传递不同的参数可以画出不同的形状。")]),a._v(" "),e("h2",{attrs:{id:"保存与恢复画布状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#保存与恢复画布状态"}},[a._v("#")]),a._v(" 保存与恢复画布状态")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法 "),e("code",[a._v("save()")]),a._v(" 和 "),e("code",[a._v("restore()")]),a._v(" 来保存和恢复画布状态，更方便地在不同样式间切换，以绘画出不同的图形。")]),a._v(" "),e("h2",{attrs:{id:"擦除画布-clearrect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#擦除画布-clearrect"}},[a._v("#")]),a._v(" 擦除画布 clearRect")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法 "),e("code",[a._v("clearRect(posX, posY, width, height)")]),a._v(" 擦除画布的特定区域。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 将参数设置为画布的尺寸，擦除整个画布\nctx.clearRect(0, 0, c.width, c.height);\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"基本图形"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本图形"}},[a._v("#")]),a._v(" 基本图形")]),a._v(" "),e("h3",{attrs:{id:"矩形"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#矩形"}},[a._v("#")]),a._v(" 矩形")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 方法 "),e("code",[a._v("fillRect()")]),a._v(" 或 "),e("code",[a._v("strokeRect()")]),a._v(" 绘制实心矩形或空心矩形，传递不同的参数以定制矩形外观 "),e("code",[a._v("fillRect(posX, posY, width, height)")]),a._v("。")]),a._v(" "),e("p",[a._v("canvast 提供了三种方法绘制矩形：")]),a._v(" "),e("ul",[e("li",[a._v("fillRect(x, y, width, height)：绘制一个填充的矩形。")]),a._v(" "),e("li",[a._v("strokeRect(x, y, width, height)：绘制一个矩形的边框。")]),a._v(" "),e("li",[a._v("clearRect(x, y, widh, height)：清除指定的矩形区域，然后这块区域会变的完全透明。")])]),a._v(" "),e("p",[a._v("默认颜色是黑色，可以通过以下属性进行修改：")]),a._v(" "),e("ul",[e("li",[a._v("属性 "),e("code",[a._v("fillStyle")]),a._v(" 设置填充颜色")]),a._v(" "),e("li",[a._v("属性"),e("code",[a._v("strokeStyle")]),a._v(" 设置边框颜色属性")])]),a._v(" "),e("h3",{attrs:{id:"路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路径"}},[a._v("#")]),a._v(" 路径")]),a._v(" "),e("ul",[e("li",[a._v("可以通过 "),e("code",[a._v("ctx")]),a._v(" 多种方法"),e("a",{attrs:{href:"https://www.w3.org/TR/2dcontext/#building-paths",target:"_blank",rel:"noopener noreferrer"}},[a._v("创建路径 Path"),e("OutboundLink")],1),a._v(" 以绘制出一个复杂的形状。")]),a._v(" "),e("li",[a._v("使用方法 "),e("code",[a._v("beginPath()")]),a._v(" 声明需要创建一个新的路径")]),a._v(" "),e("li",[a._v("使用方法 "),e("code",[a._v("moveTo(x, y)")]),a._v(" 和 "),e("code",[a._v("lineTo(x, y)")]),a._v(" 创建路径，前一个方法确定路径开始点，相当于将「画笔」移动到指定的坐标；后一个方法基于当前坐标和该方法给出的坐标之间创建一条路径")]),a._v(" "),e("li",[a._v("方法 "),e("code",[a._v("fill()")]),a._v(" 或 "),e("code",[a._v("stroke()")]),a._v(" 结束路径绘制，并创建实心或空心的图形")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 绘制路径\nctx.beginPath(); // 声明开始绘制线段\nctx.moveTo(75, 75); // 设定起始点，相当于移动（提起的）画笔\nctx.lineTo(125, 75); // 画线\nctx.lineTo(125, 125); // 画线\nctx.lineTo(75, 75); // 画线\nctx.fill(); // 根据路径绘制出填充图形\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("h3",{attrs:{id:"弧线或圆形"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#弧线或圆形"}},[a._v("#")]),a._v(" 弧线或圆形")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 方法 "),e("code",[a._v("arc")]),a._v(" 绘制弧形，使用弧度单位")]),a._v(" "),e("p",[a._v("context.arc(x,y,r,sAngle,eAngle,counterclockwise);")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("参数")]),a._v(" "),e("th",[a._v("描述")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[e("em",[a._v("x")])]),a._v(" "),e("td",[a._v("圆的中心的 x 坐标。")])]),a._v(" "),e("tr",[e("td",[e("em",[a._v("y")])]),a._v(" "),e("td",[a._v("圆的中心的 y 坐标。")])]),a._v(" "),e("tr",[e("td",[e("em",[a._v("r")])]),a._v(" "),e("td",[a._v("圆的半径。")])]),a._v(" "),e("tr",[e("td",[e("em",[a._v("sAngle")])]),a._v(" "),e("td",[a._v("起始角，以弧度计。（弧的圆形的三点钟位置是 0 度）。")])]),a._v(" "),e("tr",[e("td",[e("em",[a._v("eAngle")])]),a._v(" "),e("td",[a._v("结束角，以弧度计。")])]),a._v(" "),e("tr",[e("td",[e("em",[a._v("counterclockwise")])]),a._v(" "),e("td",[a._v("可选。规定应该逆时针还是顺时针绘图。False = 顺时针，true = 逆时针。")])])])]),a._v(" "),e("p",[e("img",{attrs:{src:"https://www.w3school.com.cn/i/arc.gif",alt:"弧/曲线"}})]),a._v(" "),e("ul",[e("li",[a._v("中心：arc(100,75,50,0"),e("em",[a._v("Math.PI,1.5")]),a._v("Math.PI)")]),a._v(" "),e("li",[a._v("起始角：arc(100,75,50,0,1.5*Math.PI)")]),a._v(" "),e("li",[a._v("结束角：arc(100,75,50,0"),e("em",[a._v("Math.PI,1.5")]),a._v("Math.PI)")])]),a._v(" "),e("blockquote",[e("p",[a._v("arc(x,y,r,start,stop)")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ctx.beginPath();   // 绘制路径前需要声明，避免与前一个路径相连\n// 画一个圆，半径大小是 30\nctx.arc(300, 500, 30, 0, Math.PI * 2, false);\nctx.strokeStyle = 'green'\nctx.stroke();\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h2",{attrs:{id:"颜色"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#颜色"}},[a._v("#")]),a._v(" 颜色")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 属性 "),e("code",[a._v("fillStyle")]),a._v(" 或 "),e("code",[a._v("strokeStyle")]),a._v(" 设置填充或线框颜色，支持使用 CSS 规范声明的约 140 种"),e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%BD%91%E9%A1%B5%E9%A2%9C%E8%89%B2",target:"_blank",rel:"noopener noreferrer"}},[a._v("颜色名称"),e("OutboundLink")],1),a._v("或 RGB 十六进制码。")]),a._v(" "),e("h2",{attrs:{id:"文本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文本"}},[a._v("#")]),a._v(" 文本")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法 "),e("code",[a._v("fillText(string, x, y)")]),a._v(" 或 "),e("code",[a._v("strokeText(string, x, y)")]),a._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_text",target:"_blank",rel:"noopener noreferrer"}},[a._v("绘制空心或实心的文本"),e("OutboundLink")],1),a._v("，其定位坐标基于字符串"),e("strong",[a._v("左下角")]),a._v("的位置。")])]),a._v(" "),e("li",[e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的属性 "),e("code",[a._v("font")]),a._v(" 设置字体样式与字体大小，默认使用 CSS "),e("code",[a._v("font")]),a._v(" 属性相同的语法，默认值字体和大小是 "),e("code",[a._v("10px sans-serif")])])]),a._v(" "),e("li",[e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的属性 "),e("code",[a._v("textAlign")]),a._v(" 设置文本对齐方式，可选的值包括")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("start")]),a._v(" 默认值")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("end")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("left")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("right")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("center")])])])])]),a._v(" "),e("li",[e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的属性 "),e("code",[a._v("fillStyle")]),a._v(" 或 "),e("code",[a._v("strokeStyle")]),a._v(" 设置填充颜色")])]),a._v(" "),e("li",[e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的属性 "),e("code",[a._v("lineWidth")]),a._v(" 设置边框宽度")])])]),a._v(" "),e("h2",{attrs:{id:"图像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图像"}},[a._v("#")]),a._v(" 图像")]),a._v(" "),e("h3",{attrs:{id:"绘制图像-drawimage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#绘制图像-drawimage"}},[a._v("#")]),a._v(" 绘制图像 drawImage")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的"),e("a",{attrs:{href:"https://www.w3school.com.cn/tags/canvas_drawimage.asp",target:"_blank",rel:"noopener noreferrer"}},[a._v("方法 "),e("code",[a._v("darwImage()")]),e("OutboundLink")],1),a._v(" 在画布上绘制图片、其他画布或视频，以实现复制、增添特效等功能。也可以增加或减少图像的尺寸以绘制图像的某些部分。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 剪切图像，并在画布上定位被剪切的部分：\nctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("可传递的参数值")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("参数")]),a._v(" "),e("th",[a._v("描述")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[e("code",[a._v("img")])]),a._v(" "),e("td",[a._v("图像、画布或视频（对象）源")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("sx")])]),a._v(" "),e("td",[a._v("可选。开始剪切的 "),e("code",[a._v("x")]),a._v(" 坐标位置。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("sy")])]),a._v(" "),e("td",[a._v("可选。开始剪切的"),e("code",[a._v("y")]),a._v("坐标位置。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("swidth")])]),a._v(" "),e("td",[a._v("可选。被剪切图像的宽度。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("sheight")])]),a._v(" "),e("td",[a._v("可选。被剪切图像的高度。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("x")])]),a._v(" "),e("td",[a._v("在画布上放置图像的"),e("code",[a._v("x")]),a._v(" 坐标位置。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("y")])]),a._v(" "),e("td",[a._v("在画布上放置图像的 "),e("code",[a._v("y")]),a._v(" 坐标位置。")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("width")])]),a._v(" "),e("td",[a._v("可选。要使用的图像的宽度。（伸展或缩小图像）")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("height")])]),a._v(" "),e("td",[a._v("可选。要使用的图像的高度。（伸展或缩小图像）")])])])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('// 创建一个新的 image 元素，并将其添加到画布中\nlet img = new Image();\nimg.src = "http://lorempixel.com/300/300";   // 设置图片来源\n// 由于图片加载是异步的，因此使用方法 onload() 待图片加载完成后再执行回调函数\nimg.onload = function() {\n  // 将图像 img 绘制到画布上，定位坐标是 (0,0) 图片大小与画布大小一致\n  ctx.drawImage(img, 0, 0, c.width, c.height);\n};\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("h3",{attrs:{id:"下载图像-todataurl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载图像-todataurl"}},[a._v("#")]),a._v(" 下载图像 toDataURL")]),a._v(" "),e("p",[a._v("使用 canvas 对象 "),e("code",[a._v("c")]),a._v(" 方法 "),e("code",[a._v("toDataURL()")]),a._v(" 输出画布中的图像，该方法创建一个可以表现画布图片的"),e("strong",[a._v("字符串")]),a._v("，支持输出各种格式的图片。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 输出图片到变量 saveImage 中\nlet savedImage = c.toDataURL();\n\n// 打开变量保存的图片\nwindow.open(savedImage);\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("h3",{attrs:{id:"图像数据-imagedata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图像数据-imagedata"}},[a._v("#")]),a._v(" 图像数据 ImageData")]),a._v(" "),e("p",[a._v("画布可以作为像素图片使用，使用 "),e("code",[a._v("ctx")]),a._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/getImageData",target:"_blank",rel:"noopener noreferrer"}},[a._v("方法 "),e("code",[a._v("getImageData")]),e("OutboundLink")],1),a._v(" 从画布获取一个图像数据对象，也可以使用 "),e("code",[a._v("ctx")]),a._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createImageData",target:"_blank",rel:"noopener noreferrer"}},[a._v("方法 "),e("code",[a._v("createImageData")]),e("OutboundLink")],1),a._v(" 初始化一个空的图像数据对象；修改后的数据使用 "),e("code",[a._v("ctx")]),a._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/putImageData",target:"_blank",rel:"noopener noreferrer"}},[a._v("方法 "),e("code",[a._v("putImageData")]),e("OutboundLink")],1),a._v(" 设置回去。")]),a._v(" "),e("p",[a._v("图像数据对象包含图像三种属性")]),a._v(" "),e("ul",[e("li",[a._v("宽度 "),e("code",[a._v("width")])]),a._v(" "),e("li",[a._v("高度 "),e("code",[a._v("height")])]),a._v(" "),e("li",[a._v("数据 "),e("code",[a._v("data")]),a._v(" 存储每个像素的 RGB 数据和 Alpha 值（范围是 0-255，其中 0 是透明的，255 是完全可见的），一般使用 "),e("code",[a._v("Uint8ClampedArray")]),a._v(" 数组表示，数组每四个元素表示一个像素点信息，即 RGBA 值")])]),a._v(" "),e("p",[a._v("用以下方法获取或修改图片数据：")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("createImageData（width， height, imageData)")]),a._v(" 初始化一个空的图像数据对象")]),a._v(" "),e("li",[e("code",[a._v("getImageData(x, y, width, height)")]),a._v(" 复制画布上指定矩形的像素数据，起始点为 "),e("code",[a._v("(x,y)")]),a._v(" ，宽为 "),e("code",[a._v("width")]),a._v(" 高为 "),e("code",[a._v("height")])]),a._v(" "),e("li",[e("code",[a._v("putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight)")]),a._v(" 存储数据到背景画布")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('let imgData = ctx.getImage(0, 0, c.width, c.height);\n\nfunction paintGreen(imagData) {\n  let numPix = imgData.data.length / 4;\n  // 将画布中每隔 10 个像素设置为绿色\n  for (let i = 0; i < numPix; i++) {\n    if(i % 10 === 0) {\n      // 将第 i 个像素的 Green 值设置为 255（需要背景原色为白色，否则还需要编辑 red 值和 blue 值\n      imgData.data[i*4 + 1] = 255;\n      // 将第 i 个像素的 Alpha 值设置为 255（非透明）\n      imgData.data[i*4 + 3] = 255;\n    }\n  }\n  // 将修改后的图像数据存储回背景画布\n  ctx.putImageData(imgData, 0, 0);\n}\n\npaintGreen(imgData);\n// 将彩色图片转换为黑白（灰）图片\nlet img = new Image();\nimg.src = "test.jpg";\nimg.onload = function() {\n    ctx.drawImage(img, 0, 0, c.width, c.height);\n    imgData = ctx.getImageData(0, 0, c.width, c.height);\n    gray(imgData); // 调用灰度函数\n}\n\n// 灰度函数\nfunction gray(imagData) {\n    let numPix = imgData.data.length / 4;\n\n    for (let i = 0; i < numPix; i++) {\n        let gray = (imgData.data[i*4] + imgData.data[i*4+1] + imgData.data[i*4+2])/3\n        imgData.data[i*4] = gray;\n        imgData.data[i*4+1] = gray;\n        imgData.data[i*4+2] = gray;\n        imgData.data[i*4 + 3] = 255;\n    }\n    ctx.putImageData(imgData, 0, 0);\n}\n\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br"),e("span",{staticClass:"line-number"},[a._v("33")]),e("br"),e("span",{staticClass:"line-number"},[a._v("34")]),e("br"),e("span",{staticClass:"line-number"},[a._v("35")]),e("br"),e("span",{staticClass:"line-number"},[a._v("36")]),e("br"),e("span",{staticClass:"line-number"},[a._v("37")]),e("br"),e("span",{staticClass:"line-number"},[a._v("38")]),e("br"),e("span",{staticClass:"line-number"},[a._v("39")]),e("br"),e("span",{staticClass:"line-number"},[a._v("40")]),e("br"),e("span",{staticClass:"line-number"},[a._v("41")]),e("br")])]),e("h2",{attrs:{id:"变换操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#变换操作"}},[a._v("#")]),a._v(" 变换操作")]),a._v(" "),e("h4",{attrs:{id:"缩放-scale"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缩放-scale"}},[a._v("#")]),a._v(" 缩放 scale")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法 "),e("code",[a._v("scale(x,y)")]),a._v(" 将该命令后再创建的形状的 "),e("code",[a._v("x")]),a._v(" 和 "),e("code",[a._v("y")]),a._v(" 值乘以给定系数，即放大相应的倍数")]),a._v(" "),e("h4",{attrs:{id:"移动-translate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#移动-translate"}},[a._v("#")]),a._v(" 移动 translate")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法  "),e("code",[a._v("translate(x,y)")]),a._v(" 将该命令后再创建的形状沿水平方向移动 "),e("code",[a._v("x")]),a._v(" 个像素，沿垂直方向移动 "),e("code",[a._v("y")]),a._v(" 个像素。")]),a._v(" "),e("h4",{attrs:{id:"旋转-rotate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#旋转-rotate"}},[a._v("#")]),a._v(" 旋转 rotate")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("ctx")]),a._v(" 的方法  "),e("code",[a._v("rotate(angleRadians)")]),a._v(" 将对象（通常）绕中心转动特定弧度")]),a._v(" "),e("p",[a._v("💡 度数与弧度的关系 "),e("code",[a._v("radian = degree * (Math.PI/180)")])]),a._v(" "),e("h2",{attrs:{id:"动画"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动画"}},[a._v("#")]),a._v(" 动画")]),a._v(" "),e("p",[a._v("使用方法 "),e("code",[a._v("requestAnimationFrame")]),a._v(" ，其作用相当于一个定时器（类似于 "),e("code",[a._v("setTimeout")]),a._v(" 和 "),e("code",[a._v("setInterval")]),a._v("） 让浏览器以一帧为单位循环执行画面（渲染）操作。")]),a._v(" "),e("p",[a._v("方法 "),e("code",[a._v("requestAnimationFrame")]),a._v(" 接受一个动画执行函数作为参数，"),e("strong",[a._v("这个函数在每一帧都会被执行一次，可以对每一帧画面进行渲染")]),a._v("，并根据条件判断是否结束，如果动画没有结束，则继续调用 "),e("code",[a._v("requestAnimationFrame")]),a._v(" 并将"),e("strong",[a._v("函数自身")]),a._v("作为参数传入（循环调用）。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("function animationWidth() {\n  let div = document.getElementById('box');\n  div.style.width = parseInt(div.style.width) + 1 + 'px';\n\n  if(parseInt(div.style.width) < 200) {\n    requestAnimationFrame(animationWidth)\n  }\n}\n\nanimationWidth();\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("p",[a._v("💡 "),e("strong",[a._v("将视频放置在画布中，通过方法 "),e("code",[a._v("requestAnimationFrame")]),a._v(" 可以在视频播放时流畅地「抽帧」，即提取其帧图像")]),a._v("，再利用图片数据 ImageData 处理像素的各种方法，可以为视频添加特效。")]),a._v(" "),e("p",[a._v("💡 "),e("strong",[a._v("游戏循环")]),a._v("是使用应用或游戏时连续运行的一系列事件，"),e("code",[a._v("requestAnimationFrame")]),a._v(" 会处理大多数繁重的工作，以便确保在活跃查看应用时，"),e("strong",[a._v("应用的运行速度尽可能达到 60 帧/秒")]),a._v("。")]),a._v(" "),e("h2",{attrs:{id:"交互"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#交互"}},[a._v("#")]),a._v(" 交互")]),a._v(" "),e("p",[a._v("通过监听各种事件，并在事件处理函数中修改画布的元素各种属性以实现交互功能。")]),a._v(" "),e("h3",{attrs:{id:"处理键盘输入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#处理键盘输入"}},[a._v("#")]),a._v(" 处理键盘输入")]),a._v(" "),e("p",[a._v("借助框架 "),e("a",{attrs:{href:"https://github.com/marquete/kibo",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibo"),e("OutboundLink")],1),a._v(" 处理键盘输入事件，允许引用按键值而不是它们的"),e("a",{attrs:{href:"https://segmentfault.com/a/1190000005828048",target:"_blank",rel:"noopener noreferrer"}},[a._v("键码值"),e("OutboundLink")],1)]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("let k = new Kibo();\nk.down(\\['up', 'w'\\], function() {\n    // Do something cool on the canvas\n});\n\nk.up(\\['enter', 'q'\\], function() {\n    // Do other stuff.\n});\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("h3",{attrs:{id:"处理鼠标输入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#处理鼠标输入"}},[a._v("#")]),a._v(" 处理鼠标输入")]),a._v(" "),e("p",[a._v("画布元素 "),e("code",[a._v("<canvas>")]),a._v(" 也可以接收鼠标相关事件，关键是要确定用户在画布上的哪个位置点击。")]),a._v(" "),e("p",[a._v("鼠标点击事件 "),e("code",[a._v("event")]),a._v(" 对象的属性 "),e("code",[a._v("clientX")]),a._v(" 和 "),e("code",[a._v("clientY")]),a._v(" 记录了点击相对于浏览器窗口全局中的位置，再使用每个元素的属性"),e("code",[a._v("offsetLeft")]),a._v("和"),e("code",[a._v("offsetTop")]),a._v(" 得到画布元素相对于浏览器左上角 "),e("code",[a._v("(0,0)")]),a._v(" 的偏移量，从 "),e("code",[a._v("clientX")]),a._v(" 和 "),e("code",[a._v("clientY")]),a._v(" 中减去 "),e("code",[a._v("offsetLeft")]),a._v(" 和 "),e("code",[a._v("offsetTop")]),a._v(" 值，就可以得到用户点击相对于画布的位置。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('function handleMouseClick(event) {\n        x = event.clientX - c.offsetLeft;\n        y = event.clientY - c.offsetTop;\n        console.log("x, y:" + x + "," + y);\n}\n\nc.addEventListener("click", handleMouseClick, false);\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("h2",{attrs:{id:"火花案例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#火花案例"}},[a._v("#")]),a._v(" 火花案例：")]),a._v(" "),e("p",[a._v("html部分")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<canvas id="canvas">Canvas is not supported in your browser.</canvas>\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("css部分")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("body {\n\tbackground: #000;\n\tmargin: 0;\n}\ncanvas {\n\tcursor: crosshair;\n\tdisplay: block;\n}\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("js部分")]),a._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("var")]),a._v(" canvas "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'canvas'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("，\nctx "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" canvas"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2d'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\nmousedown "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);