(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{463:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"事件模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件模型"}},[t._v("#")]),t._v(" 事件模型")]),t._v(" "),a("p",[t._v("事件模型主要分为3种：DOM0原始事件模型、DOM2事件模型、DOM3IE事件模型。")]),t._v(" "),a("h2",{attrs:{id:"原始事件模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原始事件模型"}},[t._v("#")]),t._v(" 原始事件模型")]),t._v(" "),a("p",[t._v("通过事件监听函数指定事件处理程序，事件处理程序在冒泡阶段执行。")]),t._v(" "),a("p",[t._v("DOM0 事件处理程序，同一个事件只能绑定一个事件处理函数，后面绑定的处理函数会覆盖前面绑定的处理函数。")]),t._v(" "),a("p",[t._v("这是一种被所有浏览器都支持的事件模型，对于原始事件而言，没有事件流，事件一旦发生将马上进行处理，有两种方式可以实现原始事件：")]),t._v(" "),a("p",[t._v("（1）在html代码中直接指定属性值：<button id=“demo” type=“button” οnclick=“doSomeTing()” />")]),t._v(" "),a("p",[t._v("（2）在js代码中为　document.getElementsById(“demo”).onclick = doSomeTing()")]),t._v(" "),a("p",[t._v("优点：所有浏览器都兼容")]),t._v(" "),a("p",[t._v("缺点：")]),t._v(" "),a("ul",[a("li",[t._v("逻辑与显示没有分离；")]),t._v(" "),a("li",[t._v("相同事件的监听函数只能绑定一个，后绑定的会覆盖掉前面的，如：a.onclick = func1; a.onclick = func2;将只会执行func2中的内容。")]),t._v(" "),a("li",[t._v("无法通过事件的冒泡、委托等机制")])]),t._v(" "),a("h2",{attrs:{id:"dom2事件模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dom2事件模型"}},[t._v("#")]),t._v(" "),a("strong",[t._v("DOM2事件模型")])]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("addEventListener()")]),t._v(" 添加事件处理程序，通过 "),a("code",[t._v("removeEventListener()")]),t._v(" 删除事件处理程序。")]),t._v(" "),a("p",[t._v("它们都接收三个参数，分别是事件名称、事件处理函数以及一个布尔类型的值，这个布尔值默认为 false")]),t._v(" "),a("p",[t._v("如果布尔值为 false，则在冒泡阶段执行处理函数，如果布尔值为 true，则在捕获阶段执行处理函数。")]),t._v(" "),a("p",[t._v("DOM2 事件处理程序，同一个事件可以绑定多个事件处理函数，先绑定先执行。")]),t._v(" "),a("p",[t._v("此模型是W3C制定的标准模型，现代浏览器（IE6~8除外）都已经遵循这个规范。W3C制定的事件模型中，一次事件的发生包含三个过程：")]),t._v(" "),a("ol",[a("li",[t._v("事件捕获阶段，")]),t._v(" "),a("li",[t._v("事件目标阶段，")]),t._v(" "),a("li",[t._v("事件冒泡阶段")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200913203033477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dxbGl1ag==,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),a("p",[t._v("事件捕获：当某个元素触发某个事件（如onclick），顶层对象document就会发出一个事件流，随着DOM树的节点向目标元素节点流去，直到到达事件真正发生的目标元素。在这个过程中，事件相应的监听函数是不会被触发的。")]),t._v(" "),a("p",[t._v("事件目标：当到达目标元素之后，执行目标元素该事件相应的处理函数。如果没有绑定监听函数，那就不执行。")]),t._v(" "),a("p",[t._v("事件冒泡：从目标元素开始，往顶层元素传播。途中如果有节点绑定了相应的事件处理函数，这些函数都会被一次触发。")]),t._v(" "),a("p",[t._v("所有的事件类型都会经历事件捕获但是只有部分事件会经历事件冒泡阶段,例如submit事件就不会被冒泡。")]),t._v(" "),a("p",[a("strong",[t._v("事件的传播是可以阻止的：")])]),t._v(" "),a("ul",[a("li",[t._v("在W3c中，使用stopPropagation（）方法")]),t._v(" "),a("li",[t._v("在IE下设置cancelBubble = true；")])]),t._v(" "),a("p",[t._v("在捕获的过程中stopPropagation（）；后，后面的冒泡过程就不会发生了。")]),t._v(" "),a("p",[a("strong",[t._v("标准的事件监听器该如何绑定：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("addEventListener(“eventType”,“handler”,“true|false”);\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("ul",[a("li",[t._v("eventType指事件类型，注意不要加‘on’前缀，与IE下不同，")]),t._v(" "),a("li",[t._v("handler是处理函数，")]),t._v(" "),a("li",[t._v("第三个参数即用来指定是否在捕获阶段进行处理，一般设为false来与IE保持一致(默认设置)，除非你有特殊的逻辑需求。")])]),t._v(" "),a("p",[t._v("监听器的解除也类似：removeEventListener")])]),t._v(" "),a("h3",{attrs:{id:"_1-事件捕获"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-事件捕获"}},[t._v("#")]),t._v(" （1）事件捕获")]),t._v(" "),a("p",[t._v("事件从文档对象上开始，然后往下传递，直到目标对象（从父到子），低版本浏览器不支持事件捕获。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1459925/202004/1459925-20200403162421167-1572477619.png",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"_2-事件冒泡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-事件冒泡"}},[t._v("#")]),t._v(" （2）事件冒泡")]),t._v(" "),a("p",[t._v("事件从目标对象上开始，然后往上传递，直到文档对象（从子到父），所有的浏览器都支持事件冒泡。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1459925/202004/1459925-20200403162433413-1995064744.png",alt:"img"}})]),t._v(" "),a("h3",{attrs:{id:"_3-事件流模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-事件流模型"}},[t._v("#")]),t._v(" （3）事件流模型")]),t._v(" "),a("p",[t._v("DOM2 定义了事件流模型，这是目前广泛使用的 JavaScript 事件模型，规定事件传递先捕获后冒泡。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1459925/202004/1459925-20200403162444410-48931059.png",alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"ie事件模型-ie9-之前"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ie事件模型-ie9-之前"}},[t._v("#")]),t._v(" "),a("strong",[t._v("IE事件模型")]),t._v("（IE9 之前）")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("attachEvent()")]),t._v(" 添加事件处理程序，通过 "),a("code",[t._v("detachEvent()")]),t._v(" 删除事件处理程序。")]),t._v(" "),a("p",[t._v("它们都接收两个参数，分别是事件监听函数名称以及事件处理函数，将在冒泡阶段执行处理函数。")]),t._v(" "),a("p",[t._v("低版本 IE 事件处理程序，同一个事件可以绑定多个事件处理函数，先绑定后执行。")]),t._v(" "),a("p",[t._v("IE不把该对象传入事件处理函数,由于在任意时刻只会存在一个事件,所以IE把它作为全局对象window的一个属性。")]),t._v(" "),a("p",[t._v("IE的事件模型只有两步，先执行元素的监听函数，然后事件沿着父节点一直冒泡到document。")]),t._v(" "),a("p",[t._v("IE模型下的事件监听方式也挺独特，绑定监听函数的方法是：attachEvent(  “eventType”,“handler”)，其中evetType为事件的类型，如onclick，注意要加’on’。解除事件监听器的方法是  detachEvent(“eventType”,“handler” )")]),t._v(" "),a("p",[t._v("IE的事件模型已经可以解决原始模型的三个缺点，但其自己的缺点就是兼容性，只有IE系列浏览器才可以这样写。")]),t._v(" "),a("p",[t._v("事件模型兼容性写法：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" demo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘demo’"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attachEvent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ndemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘onclick’"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ndemo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘click’"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"事件类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件类型"}},[t._v("#")]),t._v(" 事件类型")]),t._v(" "),a("p",[t._v("HTML 与 JavaScript 通过事件进行交互，常见的事件如下：")]),t._v(" "),a("p",[t._v("（1）鼠标事件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("mousedown")]),t._v("：在按下鼠标按键时触发")]),t._v(" "),a("li",[a("code",[t._v("mouseup")]),t._v("：在松开鼠标按键时触发")]),t._v(" "),a("li",[a("code",[t._v("click")]),t._v("：在点击鼠标时触发")]),t._v(" "),a("li",[a("code",[t._v("dblclick")]),t._v("：在双击鼠标时触发")]),t._v(" "),a("li",[a("code",[t._v("mouseenter")]),t._v("：在鼠标移入特定范围时触发")]),t._v(" "),a("li",[a("code",[t._v("mouseleave")]),t._v("：在鼠标移出特定范围时触发")]),t._v(" "),a("li",[a("code",[t._v("mousemove")]),t._v("：鼠标在特定范围内移动时触发")]),t._v(" "),a("li",[a("code",[t._v("mouseover")]),t._v("：鼠标移到某元素上触发")]),t._v(" "),a("li",[a("code",[t._v("mouseout")]),t._v("：鼠标从某元素移开触发")])]),t._v(" "),a("p",[t._v("（2）键盘事件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("keydown")]),t._v("：在按下键盘按键时触发")]),t._v(" "),a("li",[a("code",[t._v("keyup")]),t._v("：在松开键盘按键时触发")]),t._v(" "),a("li",[a("code",[t._v("keypress")]),t._v("：在按住键盘按键时触发")])]),t._v(" "),a("p",[t._v("（3）UI 事件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("load")]),t._v("：在文档或图像加载完成后触发")]),t._v(" "),a("li",[a("code",[t._v("unload")]),t._v("：在文档或图像销毁完成后触发")]),t._v(" "),a("li",[a("code",[t._v("error")]),t._v("：加载文档或图像时发生错误")]),t._v(" "),a("li",[a("code",[t._v("abort")]),t._v("：加载文档或图像时出现中断")]),t._v(" "),a("li",[a("code",[t._v("scroll")]),t._v("：在滚动滚动条时触发")]),t._v(" "),a("li",[a("code",[t._v("resize")]),t._v("：调整窗口大小时触发")])]),t._v(" "),a("p",[t._v("（4）焦点事件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("focus")]),t._v("：在元素获得焦点时触发，事件不冒泡")]),t._v(" "),a("li",[a("code",[t._v("blur")]),t._v("：在元素失去焦点时触发，事件不冒泡")])]),t._v(" "),a("p",[t._v("（5）表单事件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("select")]),t._v("：在被选定时触发")]),t._v(" "),a("li",[a("code",[t._v("change")]),t._v("：在被修改时触发")]),t._v(" "),a("li",[a("code",[t._v("submit")]),t._v("：在被提交时触发")])]),t._v(" "),a("h2",{attrs:{id:"事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件对象"}},[t._v("#")]),t._v(" 事件对象")]),t._v(" "),a("p",[t._v("当一个事件被触发时，会产生一个事件对象，这个事件对象会隐式传入事件处理函数，因此，我们可以在事件处理函数中通过事件对象的属性和方法获取事件的相关信息。")]),t._v(" "),a("p",[t._v("（1）事件对象的常用属性")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("type")]),t._v("：事件名称")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("target")]),t._v("：触发事件的目标元素")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("currentTarget")]),t._v("：触发事件的当前元素")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("bubbles")]),t._v("：事件是否为冒泡类型")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("cancelBubble")]),t._v("：是否取消冒泡行为")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("cancelable")]),t._v("：是否能调用  "),a("code",[t._v("preventDefault()")]),t._v(" 方法取消默认行为")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("defaultPrevented")]),t._v("：是否有调用 "),a("code",[t._v("preventDefault()")]),t._v(" 方法")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("eventPhase")]),t._v("：事件传播的阶段")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("timeStamp")]),t._v("：触发事件的时间")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("clientX")]),t._v("：鼠标指针相对于浏览器页面的水平坐标")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("clientY")]),t._v("：鼠标指针相对于浏览器页面的垂直坐标")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("screenX")]),t._v("：鼠标指针相对于屏幕的水平坐标")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("screenY")]),t._v("：鼠标指针相对于屏幕的垂直坐标")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("shiftKey")]),t._v("：“SHIFT” 键是否被按下")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ctrlKey")]),t._v("：“CTRL” 键是否被按下")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("altKey")]),t._v("：“ALT” 键是否被按下")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("metaKey")]),t._v("：“meta” 键是否被按下")])])]),t._v(" "),a("p",[t._v("（2）事件对象的常用方法")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("preventDefault")]),t._v("：阻止默认行为")]),t._v(" "),a("li",[a("code",[t._v("stopPropagation")]),t._v("：阻止事件传播")])]),t._v(" "),a("h3",{attrs:{id:"监听load事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听load事件"}},[t._v("#")]),t._v(" 监听load事件")]),t._v(" "),a("p",[t._v("页面上所有的资源（图片，音频，视频等）被加载以后才会触发load事件，简单来说，页面的load事件会在DOMContentLoaded被触发之后才触发。")]),t._v(" "),a("p",[t._v("onload事件所有的浏览器都支持，所以我们不需要什么兼容，只要通过调用。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("window.onload = function(){\n    \n}\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"domcontentloaded-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domcontentloaded-事件"}},[t._v("#")]),t._v(" "),a("strong",[t._v("DOMContentLoaded 事件")])]),t._v(" "),a("p",[t._v("当初始的 HTML 文档被完全加载和解析完成之后，DOMContentLoaded 事件被触发，而无需等待样式表、图像和子框架的完成加载。")]),t._v(" "),a("p",[t._v("当文档中没有脚本时，浏览器解析完文档便能触发 DOMContentLoaded 事件；如果文档中包含脚本，则脚本会阻塞文档的解析，而脚本需要等位于脚本前面的css加载完才能执行。在任何情况下，DOMContentLoaded 的触发不需要等待图片等其他资源加载完成。")]),t._v(" "),a("p",[t._v("DOMContentLoaded不同的浏览器对其支持不同，所以在实现的时候我们需要做不同浏览器的兼容。")]),t._v(" "),a("p",[t._v("1）支持DOMContentLoaded事件的，就使用DOMContentLoaded事件；")]),t._v(" "),a("p",[t._v("2）IE6、IE7不支持DOMContentLoaded，但它支持onreadystatechange事件，该事件的目的是提供与文档或元素的加载状态有关的信息。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v('更低的ie还有个特有的方法doScroll， 通过间隔调用：document.documentElement.doScroll("left");')])]),t._v(" "),a("p",[t._v("可以检测DOM是否加载完成。 当页面未加载完成时，该方法会报错，直到doScroll不再报错时，就代表DOM加载完成了。该方法更接近DOMContentLoaded的实现。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ready")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addEventListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DOMContentLoaded"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DOMContentLoaded"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果IE")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attachEvent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 确保当页面是在iframe中加载时，事件依旧会被安全触发")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onreadystatechange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"complete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onreadystatechange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是IE且页面不在iframe中时，轮询调用doScroll 方法检测DOM是否加载完毕")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doScroll "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frameElement "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undefined"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doScroll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"left"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);